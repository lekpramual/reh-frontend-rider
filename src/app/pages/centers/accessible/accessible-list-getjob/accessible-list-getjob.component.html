<mat-card>
  <div style="padding: 0px !important">
    <div class="row align-items-center px-2" style="height: 56px">
      <div class="col-6">
        <span class="mat-headline-5 reh-txt-blue900">รับ-จ่ายงาน</span>
        <span class="mat-headline-5 reh-txt-green blinking-text"> อัปเดตทุก 30 วินาที</span>
      </div>
      <div class="col-6" align="end">
        <button mat-fab extended class="reh-btn-green" (click)="openDialog()">
          <mat-icon fontSet="material-icons-outlined">add</mat-icon>
          <span class="mat-subtitle-2">คำขอใช้เปลใหม่</span>
        </button>
      </div>
    </div>
    <mat-divider> </mat-divider>
    <!-- <div *ngIf="data">
      <h2>Data Loaded</h2>
      <pre>{{ data | json }}</pre>
    </div> -->

    <div class="row">
      <div class="col-12">
        <section class="example-container" tabindex="0">

          <loading/>

          <table mat-table class="getjob" [dataSource]="dataSource">

            <ng-container matColumnDef="go_datetime">
              <th mat-header-cell *matHeaderCellDef style="width: 84px;">
                <span class="mat-subtitle-2">วันที่เวลา</span>
              </th>
              <td mat-cell *matCellDef="let element" class="lj-txt-dot">
                <div class="row">
                  <div class="col-12">
                    <span class="mat-subtitle-2">ชื่อ-สกุล: </span> <span class="mat-subtitle-1">{{element.od_rem }}</span>
                  </div>
                  <div class="col-12">
                    <span class="mat-subtitle-2">วันที่: </span> <span class="mat-subtitle-1">{{formatDateThai(element.go_date) }}</span>
                  </div>
                  <div class="col-12">
                    <span class="mat-subtitle-2">เวลา: </span> <span classs="mat-subtitle-1">{{ element.go_time }}</span>
                  </div>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="quick">
              <th mat-header-cell *matHeaderCellDef style="text-align: center" style="width: 72px;">
                <span class="mat-subtitle-2">ประเภท</span>
              </th>
              <td mat-cell *matCellDef="let element" style="width: 72px"
                [class]="{
                  'bg-txt-green' : element.quick == 1,
                  'bg-txt-yellow' : element.quick == 2,
                  'bg-txt-orange' : element.quick == 3,
                  'bg-txt-red' : element.quick == 4,
                }">

                @if(element.quick_name !== ''){
                  <span class="label mat-subtitle-1">{{ element.quick_name.slice(0,12) }}</span>
                }
              </td>
            </ng-container>
            <ng-container matColumnDef="wcode_staname">
              <th mat-header-cell *matHeaderCellDef style="width: 156px;">
                <span class="mat-subtitle-2">รับ-ส่ง</span>
              </th>
              <td mat-cell *matCellDef="let element" class="lj-txt-dot">
                <div class="row">
                  <div class="col-12">
                    <span class="mat-subtitle-2">อุปกรณ์: </span> <span classs="mat-subtitle-1">{{ element.equip_name }}</span>
                  </div>
                  <div class="col-12">
                    <span class="mat-subtitle-2">รับ: </span> <span class="mat-subtitle-1">{{ element.wcode_staname }}</span>
                  </div>
                  <div class="col-12">
                    <span class="mat-subtitle-2">ส่ง: </span> <span classs="mat-subtitle-1">{{ element.wcode_stoname }}</span>
                  </div>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="star" stickyEnd style="width: 20px;">
              <th mat-header-cell *matHeaderCellDef aria-label="row actions" style="text-align: center;width: 20px;" class="mat-subtitle-2">#</th>
              <td mat-cell *matCellDef="let element" >
                <div class="row g-1 justify-content-center">
                  <div class="col-12">
                    <button mat-mini-fab   matTooltip="จ่ายงาน" class="reh-btn-blue" (click)="openDialogAssignment(element.id)">
                      <mat-icon
                      fontSet="material-icons-outlined"
                      >send_to_mobile</mat-icon>
                    </button>
                  </div>
                  <div class="col-12">
                    <button  mat-mini-fab matTooltip="ยกเลิก" class="reh-btn-red" (click)="openDialogCancel(element.id)">
                      <mat-icon
                      fontSet="material-icons-outlined"
                      >phonelink_erase</mat-icon
                    >
                    </button>
                  </div>

                </div>
              </td>
            </ng-container>

            <tr
              mat-header-row
              *matHeaderRowDef="displayedColumns; sticky: true"
            ></tr>
            <tr
              mat-row

              *matRowDef="let row; columns: displayedColumns"
            ></tr>
            <tr class="mat-row" *matNoDataRow style="text-align: center;height: 50vh;">
              <td class="mat-cell" colspan="6">
                <nodata />
              </td>
            </tr>
          </table>

        </section>
      </div>
    </div>
  </div>
</mat-card>
